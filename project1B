clc;
a=[2 1 3; 1 1 -1;3 6 6]; b=[7;1;12];
n=size(a,1);
 a=[a (1:n).'],
for i=1:n-1
for j=i+1:n
a(j,i)=a(j,i)/a(i,i);
a(j,i+1:n)=a(j,i+1:n)- ...
a(j,i)*a(i,i+1:n),
end;
end;
% extract L U,
l=tril(a,-1)+eye(n),
u=triu(a),
%foward sub
y=zeros(n,1); % no need but fast
for k=1:n
s=b(k)-l(k,1:k-1)*y(1:k-1);
y(k)=s/l(k,k);
end
y,
% backsub
x=zeros(n,1);% no need but fast
for k=n:-1:1
s= y(k)-u(k,k+1:n)*x(k+1:n);
x(k)=s/u(k,k);
end